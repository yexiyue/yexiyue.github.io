---
title: Git commit ä»£ç æäº¤æ ¼å¼æ£€æŸ¥å’Œæäº¤ä¿¡æ¯æ ¡éªŒ
date: 2023-07-14
cover: /homeImage/4.jpg
tags:
  - å·¥ç¨‹åŒ–
  - å‰ç«¯
categories:
  - å­¦ä¹ ç¬”è®°
sticky: true
---

::: tip ä»‹ç»
Git commit ä»£ç æäº¤æ ¼å¼æ£€æŸ¥å’Œæäº¤ä¿¡æ¯æ ¡éªŒ
:::

<!-- more -->

### Git commit ä»£ç æäº¤æ ¼å¼æ£€æŸ¥å’Œæäº¤ä¿¡æ¯æ ¡éªŒ

#### 1.ç›¸å…³å®˜ç½‘

[Local setup --- æœ¬åœ°è®¾ç½® (commitlint.js.org)](https://commitlint.js.org/#/guides-local-setup)

[Install Â· Prettier ä¸­æ–‡ç½‘ --- Install Â· Prettier ä¸­æ–‡ç½‘](https://www.prettier.cn/docs/install.html)

[Home | Stylelint](https://stylelint.io/)

[ğŸ¶ husky | ğŸ¶ husky (typicode.github.io)](https://typicode.github.io/husky/)

https://github.com/okonet/lint-staged



#### 2.åŠŸèƒ½ä»‹ç»

- husky åœ¨æ‰§è¡Œgit å‘½ä»¤ä¹‹å‰æ‰§è¡Œè‡ªå®šä¹‰çš„å‘½ä»¤
- Lint-staged å¯¹æ·»åŠ åˆ°gitæš‚å­˜åŒºçš„æ–‡ä»¶è¿›è¡ŒåŒ¹é…æ‰§è¡Œç›¸å…³å‘½ä»¤
- Prettier,eslint,stylelintåˆ†åˆ«å¯¹è„šæœ¬å’Œæ ·å¼æ–‡ä»¶è¿›è¡Œæ ¼å¼æ£€æŸ¥



#### 3.é›†æˆ

##### 1.é…ç½®

**åœ¨packages.jsonæ–‡ä»¶scriptsé‡Œæ·»åŠ ä¸‹é¢å†…å®¹**

```json
{
  //...
	"scripts":{
		"eslint": "eslint --fix --no-error-on-unmatched-pattern 'src/**/*.{ts,tsx}'",
    "stylelint": "stylelint 'src/**/*.less' --custom-syntax postcss-less --allow-empty-input",
    "fix:stylelint": "stylelint 'src/**/*.less' --custom-syntax postcss-less --allow-empty-input --fix",
    "prettier": "prettier -c .",
    "fix:prettier": "prettier --write .",
	}
  //..
}
```

**ç„¶åé…ç½®lint-staged**

**åœ¨packages.jsonæ ¹ä¸‹**

```json
{
	"lint-staged": {
    "*.{ts,tsx}": [
      "npm run eslint"
    ],
    "*.{css,less}": [
      "npm run stylelint"
    ]
  },
}
```

**é…ç½®commitlint**

**åœ¨packages.jsonæ ¹ä¸‹**

```json
{
	"commitlint": {
    "extends": [
      "@commitlint/config-conventional"
    ]
  },
}
```



##### 2.æ·»åŠ åˆ°hooksé‡Œ

æŠŠlint-stagedæ”¾åˆ°git commitæäº¤ä¹‹å‰æ‰§è¡Œ

```bash
pnpm husky add .husky/pre-commit "npx --no-install lint-staged"
```

<img src="2023-07-14.assets/image-20230714172720482.png" alt="image-20230714172720482" style="zoom:50%;" />

æŠŠcommitlintæ”¾åˆ°æäº¤ä¿¡æ¯çš„æ—¶å€™æ‰§è¡Œ

```bash
pnpm husky add .husky/commit-msg "npx --no -- commitlint --edit ${1}"
```

<img src="2023-07-14.assets/image-20230714172740252.png" alt="image-20230714172740252" style="zoom: 50%;" />